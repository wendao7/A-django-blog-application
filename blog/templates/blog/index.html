{% extends "blog/common.html" %}
{% load static %}

{% block page-title%}
  home | winton
{% endblock %}

{% block side-nav-list %}

  <div class="container">
    <div class="section">

      <!--   Icon Section   -->
      <div class="row">
        <div class="col s12 m6">
          <div class="icon-block">
            <h2 class="center brown-text"><i class="material-icons">flash_on</i></h2>
            <h5 class="center">最近</h5>
            <ul class="collection with-header">
              {% if latest_blog_list %}
                {% for blog in latest_blog_list %}
                  {% if blog.publish %}
                    <li>
                      <a href="{% url 'blog:detail' blog.id %}" class="collection-item blue-grey-text text-darken-3">
                        <h6>
                        {{ blog.title }}
                        <span class="right"><i class="tiny material-icons">query_builder</i> {{ blog.pub_date|date:"Y-m-d H:i:s" }}</span>
                        </h6>
                      </a>
                    </li>
                    <div class="divider"></div>
                  {% endif %}
                {% endfor %}
              {% else %}
                <p class="center">winton很懒,毛都没留下一根!</p> 
              {% endif %}
            </ul>
          </div>
        </div>

        <div class="col s12 m6">
          <div class="icon-block">
            <h2 class="center brown-text"><i class="material-icons">group</i></h2>
            <h5 class="center">最热</h5>
            <ul class="collection with-header">
              {% if hotest_blog_list %}
                {% for blog in hotest_blog_list %}
                {% if blog.publish %}
                  <li>
                    <a href="{% url 'blog:detail' blog.id %}" class="collection-item blue-grey-text text-darken-3">
                      <h6>
                        {{ blog.title }}
                        <span class="right"><i class="tiny material-icons">trending_up</i> {{ blog.views }}</span>
                      </h6>
                    </a>
                  </li>
                  <div class="divider"></div>
                {% endif %}
                {% endfor %}
              {% else %}
                <p class="center">winton很懒,毛都没留下一根!</p> 
              {% endif %}
            </ul>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="parallax-container valign-wrapper">
    <div class="section no-pad-bot">
      <div class="">
        <div class="row center">
          <h5 class="header col s12 light">
          渡远荆门外，来从楚国游。
          山随平野尽，江入大荒流。
          </h5>
        </div>
      </div>
    </div>
    <div class="parallax"><img src="{% static '/blog/images/background2.jpg' %}" alt="Unsplashed background img 2"></div>
  </div>

  <div class="container">
    <div class="section">

      <div class="row">
        <div class="col s11 offset-s1 center">
          <h3><i class="mdi-content-send brown-text"></i></h3>
          <h4>文章列表</h4>
          <div class="collection">
            {% if blogs %}
              {% for blog in blogs %}
              {% if blog.publish %}
                <a href="{% url 'blog:detail' blog.id %}" class="collection-item">
                  <h5>
                  <i class=" left material-icons">voicemail</i>
                  <span class="left">{{blog.views}}</span>
                  <i class="material-icons">receipt</i>
                  <span>{{ blog.title }}</span>
                  <span class="right">{{ blog.pub_date|date:"Y-m-d H:i:s" }}</span>
                  <i class="material-icons right">schedule</i>
                  <span class="right">{{ blog.classifications }}</span>
                  <i class="material-icons right">label</i>  
                  </h5>
                </a>
              {% endif %}
              {% endfor %}
            {% else %}
              <p>winton很懒,毛都没留下一根!</p> 
            {% endif %}
          </div>

          <div class="center-align">
            <span class="blog_footer_tip">
                当前第{{blogs.number}}页,共{{pages.num_pages}}页
            </span>
            
            <ul class="pagination">
                {# 上一页，这里需要用到has_previous方法判断是否有上一页 #}
                <li class="waves-effect
                        {% if not blogs.has_previous %}
                            {{disable}}
                        {% endif %}
                    ">
                    <a href="?page=
                        {% if blogs.has_previous %}
                            {{blogs.previous_page_number}}
                        {% else %}
                            {{blogs.number}}
                        {% endif %}
                    ">
                    <i class="material-icons">chevron_left</i>
                    </a>
                </li>
         
                {# 遍历所有页码 #}
                {% for page in pages.page_range %}
                    <li class="waves-effect"><a href="?page={{page}}">{{page}}</a></li>
                {% endfor %}
         
                {# 下一页，这里需要用到has_next方法判断是否有下一页 #}
                <li class="waves-effect
                    {% if not blogs.has_next %}
                      {{disable}}
                    {% endif %}
                ">
                    <a href="?page=
                        {% if blogs.has_next %}
                            {{blogs.next_page_number}}
                        {% else %}
                            {{blogs.number}}
                        {% endif %}
                    ">
                    <i class="material-icons">chevron_right</i>
                    </a>
                </li>
            </ul>
          </div>
        </div>
      </div>

    </div>
  </div>
{% endblock %}

{% block js%}
  <script type="text/javascript">
    $(".pagination li:eq({{blogs.number}})").addClass("active");
  </script>
{% endblock %}