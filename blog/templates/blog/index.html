{% extends "blog/common.html" %}

{% block page-title%}
  home | winton
{% endblock %}

{% block side-nav-list %}
	<div class="row">
      <div class="col s3">
        <ul class="collection with-header">
          <li class="collection-header red lighten-5"><h5>最近</h5></li>
          {% if latest_blog_list %}
            {% for blog in latest_blog_list %}
              {% if blog.publish %}
                <li>
                  <a href="{% url 'blog:detail' blog.id %}" class="collection-item blue-grey-text text-darken-3">
                    <h6>
                      {{ blog.title }}
                    </h6>
                    <span><i class="tiny material-icons">query_builder</i> {{ blog.pub_date|date:"Y-m-d H:i:s" }}</span>
                  </a>
                </li>
                <div class="divider"></div>
              {% endif %}
            {% endfor %}
          {% else %}
            <p>winton很懒,毛都没留下一根!</p> 
          {% endif %}
        </ul>

        <ul class="collection with-header">
          <li class="collection-header red lighten-5"><h5>最热</h5></li>
          {% if hotest_blog_list %}
            {% for blog in hotest_blog_list %}
            {% if blog.publish %}
              <li>
                <a href="{% url 'blog:detail' blog.id %}" class="collection-item blue-grey-text text-darken-3">
                  <h6>
                    {{ blog.title }}
                    <span class="right"><i class="tiny material-icons">trending_up</i> {{ blog.views }}</span>
                  </h6>
                </a>
              </li>
              <div class="divider"></div>
            {% endif %}
            {% endfor %}
          {% else %}
            <p>winton很懒,毛都没留下一根!</p> 
          {% endif %}
        </ul>
      </div>

      <div class="col s9">
        <h3>文章列表</h3>
        <div class="collection">
          {% if blogs %}
            {% for blog in blogs %}
            {% if blog.publish %}
              <a href="{% url 'blog:detail' blog.id %}" class="collection-item">
                <h5>{{ blog.title }} <small class="right">{{ blog.pub_date|date:"Y-m-d H:i:s" }}</small></h5> 
              </a>
            {% endif %}
            {% endfor %}
          {% else %}
            <p>winton很懒,毛都没留下一根!</p> 
          {% endif %}
        </div>

        <br />
        <br />
      </div>



      <div class="center-align">
        <span class="blog_footer_tip">
            当前第{{blogs.number}}页,共{{pages.num_pages}}页
        </span>
        
        <ul class="pagination">
            {# 上一页，这里需要用到has_previous方法判断是否有上一页 #}
            <li class="waves-effect
                    {% if not blogs.has_previous %}
                        {{disable}}
                    {% endif %}
                ">
                <a href="?page=
                    {% if blogs.has_previous %}
                        {{blogs.previous_page_number}}
                    {% else %}
                        {{blogs.number}}
                    {% endif %}
                ">
                <i class="material-icons">chevron_left</i>
                </a>
            </li>
     
            {# 遍历所有页码 #}
            {% for page in pages.page_range %}
                <li class="waves-effect"><a href="?page={{page}}">{{page}}</a></li>
            {% endfor %}
     
            {# 下一页，这里需要用到has_next方法判断是否有下一页 #}
            <li class="waves-effect
                {% if not blogs.has_next %}
                  {{disable}}
                {% endif %}
            ">
                <a href="?page=
                    {% if blogs.has_next %}
                        {{blogs.next_page_number}}
                    {% else %}
                        {{blogs.number}}
                    {% endif %}
                ">
                <i class="material-icons">chevron_right</i>
                </a>
            </li>
        </ul>
      </div>

  </div>
{% endblock %}

{% block js%}
  <script type="text/javascript">
        $(".pagination li:eq({{blogs.number}})").addClass("active");
  </script>
{% endblock %}